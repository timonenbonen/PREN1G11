version: "3.8"

services:
  admin:
    image: ${DOCKER_USERNAME}/robot-admin:${ROBOT_VERSION}
    container_name: admin
    ports:
      - "8001:8001"
    devices:
      - "/dev/serial0:/dev/serial0"
    restart: unless-stopped
    stdin_open: true
    tty: true

  calculate-route:
    image: ${DOCKER_USERNAME}/robot-calculate-route:latest
    container_name: calculate-route
    volumes:
      - ./images:/app/images
    ports:
      - "8000:8000"
    privileged: true
    devices:
      - /dev/vchiq:/dev/vchiq
      - /dev/video0:/dev/video0
    restart: unless-stopped

  log-server:
    image: ${DOCKER_USERNAME}/robot-log-server:latest
    container_name: log-server
    ports:
      - "9000:9000"
    volumes:
      - ./logs:/logs
    restart: unless-stopped